<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lisa Florentina Scherrer">
<meta name="dcterms.date" content="2024-10-05">

<title>Forschungsseminar Klassen und Innovation: Vorbereitung E04</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/clipboard/clipboard.min.js"></script>
<script src="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/quarto-html/quarto.js"></script>
<script src="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/quarto-html/popper.min.js"></script>
<script src="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/quarto-html/anchor.min.js"></script>
<link href="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="HS24_KlassenundInnovation_Skript-Vorbereitung-E04_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Forschungsseminar Klassen und Innovation: Vorbereitung E04</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lisa Florentina Scherrer </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 5, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="einführung" class="level1">
<h1>1. Einführung</h1>
<p>Das sich in der Entwicklung befindende Paket “DIGCLASS” ermöglicht es, automatische verschiede Klassen-Zuordnungen in Datensätzen zu erstellen. Siehe hier: https://digclass.pages.code.europa.eu/digclass/index.html</p>
<p>Um das Paket verwenden zu können, müssen Sie zuerst Git installieren. Eine Anleitung finden Sie hier: https://git-scm.com/book/en/v2/Getting-Started-Installing-Git</p>
<p>Weitere benötigen Sie folgende Pakete (bitte installieren, falls Sie diese nicht bereits installiert haben):</p>
<ul>
<li>devtools (um von Git ein sich in der Entwicklung befindendes Paket runterzuladen)</li>
<li>vctrs (wird im Rahmen von DIGCLASs benötigt)</li>
<li>dplyr (erweitertes Datenhandling allgemein, von Tidyverse)</li>
<li>stringr (erweitertes Datenhandling von Characterdaten, von Tidyverse)</li>
</ul>
<p>Folgenden Codeteil können Sie nachher der Ausführung löschen. Dieser installiert das Paket “DIGCLASS” über GIT.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#getwd()</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_git("https://code.europa.eu/digclass/digclass.git")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="vorbereitung-und-datenladen" class="level1">
<h1>2. Vorbereitung und Datenladen</h1>
<p>Laden der benötigten Pakete:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DIGCLASS)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vctrs)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attache Paket: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Das folgende Objekt ist maskiert 'package:vctrs':

    data_frame</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Die folgenden Objekte sind maskiert von 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Die folgenden Objekte sind maskiert von 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Laden des Datensatzes: Ändern Sie dazu den Pfad zu dem Ordner, in dem Sie das File des ESS abgelegt haben. Stellen Sie sicher, dass die “Slashes” in diese / Richtung sind und das am Ende des Pfades ein Slash vorhanden ist.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pfad <span class="ot">&lt;-</span> <span class="st">"C:/Users/Florentina/OneDrive/Dokumente/everything/UniLu/5. Semester/Klassen und Innovation/S4/Klassen/"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>ESS11 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="fu">paste0</span>(pfad, <span class="st">"ESS11-subset.csv"</span>), </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">"55"</span>, <span class="st">"66"</span>, <span class="st">"77"</span>, <span class="st">"88"</span>, <span class="st">"99"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"555"</span>, <span class="st">"666"</span>, <span class="st">"777"</span>, <span class="st">"888"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"5555"</span>, <span class="st">"66666"</span>, <span class="st">"77777"</span>, <span class="st">"88888"</span>, <span class="st">"99999"</span>))</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Achtung: Die Strategie zur Erkennung von fehlenden Werte wird dazu führen, dass bei Alter die entsprechenden Werte dann NA wären -- ggfs. überprüfen!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="erstellen-der-klassenzuordnungen" class="level1">
<h1>3. Erstellen der Klassenzuordnungen</h1>
<section id="vorbereitung-der-korrektur-isco08" class="level2">
<h2 class="anchored" data-anchor-id="vorbereitung-der-korrektur-isco08">3.1 Vorbereitung der Korrektur ISCO08</h2>
<p>Die ISCO08 Klassifizierung muss im Character-Format vorliege und es gilt sicherzustellen, dass es 4-Stellen sind:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco08 <span class="ot">&lt;-</span> <span class="fu">as.character</span>(ESS11<span class="sc">$</span>isco08) <span class="co">#wird vom Paket verlangt</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco08[<span class="fu">str_count</span>(ESS11<span class="sc">$</span>isco08)<span class="sc">!=</span><span class="dv">4</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(ESS11<span class="sc">$</span>isco08)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "110" "110" "110"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco08[ESS11<span class="sc">$</span>isco08<span class="sc">==</span><span class="st">"110"</span>] <span class="ot">&lt;-</span> <span class="st">"0110"</span> <span class="co">#nur 110 entspricht nicht dem 4-stelligen Format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="klassenzuordnung-nach-wright" class="level2">
<h2 class="anchored" data-anchor-id="klassenzuordnung-nach-wright">3.2 Klassenzuordnung nach Wright</h2>
<p>Wie funktioniert die Funktion?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>?isco88com_to_wright</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>starte den http Server für die Hilfe fertig</code></pre>
</div>
</div>
<p>Vorbereitung der benötigten Variablen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco88com <span class="ot">&lt;-</span> <span class="fu">isco08_to_isco88</span>(ESS11<span class="sc">$</span>isco08) <span class="sc">%&gt;%</span> <span class="fu">isco88_to_isco88com</span>()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#is_supervisor</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>is_supervisor <span class="ot">&lt;-</span> <span class="fu">case_when</span>(ESS11<span class="sc">$</span>emplno <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                                 ESS11<span class="sc">$</span>emplno <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="fu">is.na</span>(ESS11<span class="sc">$</span>emplno) <span class="sc">~</span> <span class="dv">0</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#self_employed</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>self_employed <span class="ot">&lt;-</span> <span class="fu">if_else</span>(ESS11<span class="sc">$</span>tporgwk <span class="sc">==</span> <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#n_employees</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>emplno_nona <span class="ot">&lt;-</span> <span class="fu">case_when</span>(<span class="fu">is.na</span>(ESS11<span class="sc">$</span>emplno) <span class="sc">~</span> <span class="dv">0</span>, </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>                               ESS11<span class="sc">$</span>emplno <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>                               ESS11<span class="sc">$</span>emplno <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> ESS11<span class="sc">$</span>emplno)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#control_work</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#ESS11$iorgact</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#control_daily</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>control_daily <span class="ot">&lt;-</span> <span class="fu">case_when</span>(ESS11<span class="sc">$</span>wkdcorga <span class="sc">&gt;</span> <span class="dv">7</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>                                 ESS11<span class="sc">$</span>wkdcorga <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span> ESS11<span class="sc">$</span>wkdcorga <span class="sc">&lt;</span> <span class="dv">8</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>                                 ESS11<span class="sc">$</span>wkdcorga <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> ESS11<span class="sc">$</span>wkdcorga <span class="sc">&lt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>                                 ESS11<span class="sc">$</span>wkdcorga <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Klassifizierung nach den verschiedenen Möglichkeiten</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>wright_si <span class="ot">&lt;-</span> <span class="fu">isco88com_to_wright</span>(ESS11<span class="sc">$</span>isco88com,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">is_supervisor =</span> ESS11<span class="sc">$</span>is_supervisor,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">self_employed =</span> ESS11<span class="sc">$</span>self_employed,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">n_employees =</span> ESS11<span class="sc">$</span>emplno_nona,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">control_work =</span> ESS11<span class="sc">$</span>iorgact,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">control_daily =</span> ESS11<span class="sc">$</span>control_daily,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">type =</span> <span class="st">"simple"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">label =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">to_factor =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>wright_dm <span class="ot">&lt;-</span> <span class="fu">isco88com_to_wright</span>(ESS11<span class="sc">$</span>isco88com,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">is_supervisor =</span> ESS11<span class="sc">$</span>is_supervisor,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">self_employed =</span> ESS11<span class="sc">$</span>self_employed,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">n_employees =</span> ESS11<span class="sc">$</span>emplno_nona,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">control_work =</span> ESS11<span class="sc">$</span>iorgact,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">control_daily =</span> ESS11<span class="sc">$</span>control_daily,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">type =</span> <span class="st">"decision-making"</span>,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">label =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">to_factor =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>wright_pc <span class="ot">&lt;-</span> <span class="fu">isco88com_to_wright</span>(ESS11<span class="sc">$</span>isco88com,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">is_supervisor =</span> ESS11<span class="sc">$</span>is_supervisor,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">self_employed =</span> ESS11<span class="sc">$</span>self_employed,</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">n_employees =</span> ESS11<span class="sc">$</span>emplno_nona,</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">control_work =</span> ESS11<span class="sc">$</span>iorgact,</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">control_daily =</span> ESS11<span class="sc">$</span>control_daily,</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">type =</span> <span class="st">"power-class"</span>,</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">label =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">to_factor =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="fu">list</span>(ESS11<span class="sc">$</span>wright_si, ESS11<span class="sc">$</span>wright_dm, ESS11<span class="sc">$</span>wright_pc), table, <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]

 Self empl w/10+ employees  Self empl w/1-9 employees 
                         2                         16 
   Self empl w/no empoyees            Expert managers 
                       165                         12 
            Expert workers     Skilled manager/superv 
                       293                         12 
           Skilled workers Low skilled manager/superv 
                       474                          5 
       Low skilled workers                       &lt;NA&gt; 
                       405                          0 

[[2]]

Self empl w/10+ employees Self empl w/1-9 employees   Self empl w/no empoyees 
                        2                        16                       165 
          Expert managers        Expert supervisors                   Experts 
                       10                       102                       191 
         Skilled managers       Skilled supervisors           Skilled workers 
                        9                       103                       368 
     Low skilled managers   Low skilled supervisors       Low skilled workers 
                        4                        50                       353 
                     &lt;NA&gt; 
                       11 

[[3]]

                 Capitalist             Small Employers 
                          2                          16 
                  Self empl            Skilled Managers 
                        165                          19 
       Low skilled Managers         Skilled supervisors 
                          4                         205 
    Low skilled supervisors     Skilled Semi autonomous 
                         50                         303 
Low skilled Semi autonomous             Skilled workers 
                        117                         256 
        Low skilled workers                        &lt;NA&gt; 
                        236                          11 </code></pre>
</div>
</div>
</section>
<section id="klassenzuordnung-nach-goldthorpe-esec" class="level2">
<h2 class="anchored" data-anchor-id="klassenzuordnung-nach-goldthorpe-esec">3.3 Klassenzuordnung nach Goldthorpe (ESEC)</h2>
<p>Wie funktioniert die Funktion?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>?isco08_to_esec_mp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vorbereitung der benötigten Variablen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco08_3d <span class="ot">&lt;-</span> <span class="fu">str_trunc</span>(ESS11<span class="sc">$</span>isco08,<span class="dv">3</span>, <span class="st">"right"</span>, <span class="st">""</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco08_3d_o <span class="ot">&lt;-</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(ESS11<span class="sc">$</span>isco08), <span class="cn">NA</span>, <span class="dv">0</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco08_3d <span class="ot">&lt;-</span> <span class="fu">str_c</span>(ESS11<span class="sc">$</span>isco08_3d, ESS11<span class="sc">$</span>isco08_3d_o)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>isco08_3d_o <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Zuordnung erstellen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>ESS11<span class="sc">$</span>esec <span class="ot">&lt;-</span> <span class="fu">isco08_to_esec_mp</span>(ESS11<span class="sc">$</span>isco08_3d,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">is_supervisor =</span> ESS11<span class="sc">$</span>is_supervisor,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">self_employed =</span> ESS11<span class="sc">$</span>self_employed,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">n_employees =</span> ESS11<span class="sc">$</span>emplno_nona,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">label =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">to_factor =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ESS11<span class="sc">$</span>esec, <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                              Higher Manager 
                                         161 
                         Higher Professional 
                                         228 
                               Lower Manager 
                                          44 
                          Lower Professional 
                                         226 
                   Higher-grade White-collar 
                                         168 
            Self-employed and Small Employer 
                                          37 
Self-employed and Small Employer agriculture 
                                          15 
                    Higher-grade Blue-collar 
                                          11 
                    Lower-grade White-collar 
                                         179 
                     Lower-grade Blue-collar 
                                         137 
                                     Routine 
                                          81 
                                        &lt;NA&gt; 
                                          97 </code></pre>
</div>
</div>
</section>
</section>
<section id="eigene-überlegungen-und-analysen" class="level1">
<h1>4. Eigene Überlegungen und Analysen</h1>
<p>Probieren Sie hier nun eigene Überlegungen anzustellen zu den beiden Klassifizierungen.</p>
<ol type="i">
<li>Was zeigen sich in den Klassifizerungen je einzeln?</li>
</ol>
<p><strong><em>Wright</em></strong></p>
<ol type="1">
<li><p>simple:</p>
<p>In Wrights “simple” Klassifizierung bietet einen einfachen Überblick, wobei zwischen Arbeitgebern- und nehmern unterschieden, wobei erstere durch die Anzahl der Angestellten und letztere durch ihre Expertise und der Unterteilung in “managers/supervisors” und “workers” unterschieden werden. Die meisten fallen in die verschiedenen “workers”-Kategorien, nur 2 Personen haben mehr als 9 Angestellte, 16 weniger als 10 und 165 Personen sind selbstständig. Diese Zahlen bleiben in den anderen von Wrights Klassifizierungen gleich. Auch nur wenige fallen in die “supervisor/manager” Kategorien.</p></li>
<li><p>decision-making:</p>
<p>In der “decision-making” Klassifizierung wird zusätzlich zwischen “supervisors” und “managers” unterschieden und damit ein Fokus darauf gelegt, wie viel Entscheidungsmacht die Personen haben. Dabei sind für jede “skill”-Kategorie fallen jeweils 10-mal soviele Personen in die “supervisors” Kategorie wie in die “managers” Kategorie.</p></li>
<li><p>power-class</p>
<p>In der “power-class” Klassifizierung wird zusätzlich die tägliche Kontrolle über die Arbeit berücksichtigt. Dabei werden keine Experten differenziert, dafür aber zwei zusätzliche Kategorien für die “semi autonomous” eingeführt.</p></li>
</ol>
<p><strong><em>Goldthorpe</em></strong></p>
<p>In Goldthorpes Klassifizierung ist die Anzahl der Angestellten und die Fähigkeiten nicht von zentraler Bedeutung, dafür aber in welchen Beschäftigungsverhältnissen sich die Personen befinden. In Goldthorpes Klassifizierung sind die meisten Personen in den “Professional” Kategorien, die der Service Klasse angehören. Gefolgt davon sind die “White-collar” und “Blue-collar” Kategorien. Die “Professional” und “Manager” Kategorien (Service Klasse), mit guten Arbeitsbedingungen und Aufstiegschancen, machen ungefähr die Hälfte der Personen aus.</p>
<ol start="2" type="i">
<li>Was können Sie im Vergleich miteinander aussagen?</li>
</ol>
<p>Aus Goldthorpes Klassifizierung zeigt sich, dass die Hälfte der Fälle sich auf die Serviceklasse mit hohem Status und Sicherheit bezieht. Aus Wrights Klassifizierungen, in der diese Gruppen noch genauer unterteilt werden, zeigt sich allerdings, dass diese Personen nicht umbedingt viele Angestellte oder Entscheidungsmacht haben. Diese Aufgaben sind auf wenige in den Kategorien “manager”, “self-employed w/ 10+ employees” ,“self-employed w/1-9 employees” verteilt.</p>
<p>Die Arbeiterklasse ist in Goldthorpes Klassifizierung grob in höhere und niedrigere “White-collar” und “blue-collar” unterteilt, wobei die “white-Collar” Kategorien stärker vertreten sind und damit aufzeigen, dass mehr Hochqualifizierte in diesem Datensatz befragt wurden. In Wrights Klassifizierung werden die Personen aus der Arbeiterklasse noch genauer basierend auf Fähigkeit und Autonomie bei der Arbeit eingeteilt. Hier stellt sich heraus, dass die meisten “skilled workers” auch bis zu einem gewissen Grad an Entscheidungsmacht in ihrer Arbeitsgestaltung haben. “Low skilled workers” haben hingegen überwiegend keine Autonomie.</p>
<ol start="3" type="i">
<li>Und wie könnten Sie diese Klassifizierungen in einer einfachen Analyse nutzen?</li>
</ol>
<p>Goldthorpes Klassifizierung hingegen bietet eine Einteilung der Personen bezogen auf die Arbeitsbedingungen und die Sicherheit der Arbeitsplätze. Diese Klassifizierung könnte beispielsweise darauf hindeuten, welche sozio-demographischen Gruppen in den Jobs mit hohen Aufstiegschancen vertreten sind. Die Annahme ist beispielsweise, dass mehr Männer in den Manager-Positionen sind als Frauen und damit auch mehr Aufstiegschancen haben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlechtereinteilung für Goldthorpes Klassifizierung</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>gold_gnd_distr <span class="ot">&lt;-</span> ESS11 <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># NAs herausfiltern und Kategorien 1,2,3 behalten ("A Man", "A Woman", "Other")</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(esec), nobingnd <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Gruppen für Geschlecht und Klassen</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(esec, nobingnd) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fallzahl</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Gruppen auflösen für weitere Überlegungen</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Label erstellen</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">recode</span>(nobingnd, <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Man"</span>, <span class="st">`</span><span class="at">2</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Woman"</span>, <span class="st">`</span><span class="at">3</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Other"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Numerische Variable entfernen</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>nobingnd) <span class="sc">%&gt;%</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Eine Spalte pro Geschlecht </span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(<span class="at">key =</span> gender, <span class="at">value =</span> count, <span class="at">fill =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'esec'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabelle anzeigen</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(gold_gnd_distr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 4
   esec                                           Man Other Woman
   &lt;ord&gt;                                        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Higher Manager                                 109     0    51
 2 Higher Professional                            125     0   101
 3 Lower Manager                                   31     0    13
 4 Lower Professional                             101     0   125
 5 Higher-grade White-collar                       48     1   119
 6 Self-employed and Small Employer                17     0    20
 7 Self-employed and Small Employer agriculture    11     0     4
 8 Higher-grade Blue-collar                         8     0     3
 9 Lower-grade White-collar                        64     0   115
10 Lower-grade Blue-collar                        111     0    26
11 Routine                                         35     0    46</code></pre>
</div>
</div>
<p>Aus dieser Tabelle geht hervor, dass doppelt soviele Männer in die “Higher Manager” Kategorie fallen wie Frauen. Auch “Higher Professional” und “Lower Manager”, aber auch “Lower-grade Blue-collar” sind von Männern dominiert. Frauen sind hingegen vor allem in “Higher-grade White-collar” und “Lower-grade White-collar” vertreten. In “Lower Professional” stellen sie auch die Mehrheit dar. Damit stellen Frauen die Minderheit in der Serviceklasse vor allem in Managerpositionen dar.</p>
<p>Wrights Klassifizierung bietet eine detaillierte Einteilung der Personen bezogen auf Fähigkeit, Autonomie und Anzahl der Angestellten. Wieder auf das Geschlecht bezogen kann beispielsweise mit der “decision-making” Klassifizierung überprüft werden, ob die Frauen in der Serviceklasse eher mehr oder weniger Entscheidungsmacht haben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Geschlechtereinteilung für Wrights Klassifizierung</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>wright_gnd_distr <span class="ot">&lt;-</span> ESS11 <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># NAs herausfiltern und Kategorien 1,2 behalten</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(wright_dm), nobingnd <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Gruppen für Klassen und Geschlecht</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(wright_dm, nobingnd) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fallzahl</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Label erstellen</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">recode</span>(nobingnd, <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Man"</span>, <span class="st">`</span><span class="at">2</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Woman"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Numerische Variable entfernen</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>nobingnd) <span class="sc">%&gt;%</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Eine Spalte pro Geschlecht</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(<span class="at">key =</span> gender, <span class="at">value =</span> count, <span class="at">fill =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'wright_dm'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the summary table</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(wright_gnd_distr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
# Groups:   wright_dm [12]
   wright_dm                   Man Woman
   &lt;ord&gt;                     &lt;dbl&gt; &lt;dbl&gt;
 1 Self empl w/10+ employees     2     0
 2 Self empl w/1-9 employees     9     7
 3 Self empl w/no empoyees      77    87
 4 Expert managers              10     0
 5 Expert supervisors           75    27
 6 Experts                     114    75
 7 Skilled managers              8     1
 8 Skilled supervisors          58    44
 9 Skilled workers             191   176
10 Low skilled managers          1     3
11 Low skilled supervisors      13    37
12 Low skilled workers         138   215</code></pre>
</div>
</div>
<p>Aus der Tabelle kann man schliessen, dass Frauen in der Serviceklasse am meisten in der “self empl w/no employees” und “skilled supervisors” zu verorten sind. Im Gegensatz dazu sind die meisten Männer der Serviceklasse in den “expert supervisors” und “skilled supervisors” und self epl w/no employees” Kategorie. Daher haben auch Frauen, die in die Serviceklasse fallen, weniger Entscheidungsmacht als Männer.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>